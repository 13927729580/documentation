:sourcesdir: ../../../../../source

[[update_scripts]]
===== Create and Update Scripts

Studio is capable of creating database scripts for the application data model.

The *Generate DB scripts* command in the context menu automatically generates {main_man_url}/db_scripts.html[initialization and update scripts] for your project's database and opens the *Database scripts* page.

image::functions/data_model/generate_scripts.png[align="center"]

The *Database scripts* page displays automatically generated database initialization and update scripts. The scripts will be saved on disk when you click *Save and close* or run the database update or creation right from this page.

image::functions/data_model/generate_scripts_2.png[align="center"]

Updates::
+
--
The *Updates* tab displays scripts for updating the database to the current state of the data model. These scripts are located in the `modules/core/db/update` directory. Scripts have autogenerated names with prefixes that ensure the order of execution. Scripts containing DROP statements are highlighted in red.

You can add an arbitrary script by clicking the image:plus_button.png[Create] button, and it will be saved and executed later together with auto-generated scripts.

The newly generated scripts can be edited or completely deleted by clicking the image:remove_button.png[Remove] button.

If you click image:exclude_button.png[Exclude selected], you will have two options:

* Move the script to the directory of manually executed scripts: `modules/core/db/update-manually`. Then the script will not be executed automatically when you run *Update database*, but you will be able to run it manually when needed. This option is useful for scripts that drop columns or tables renamed earlier to `*__UNUSED`.
* Exclude the script: it will not be saved to the `modules/core/db/update` directory, but remembered in the `studio-settings.xml` file in your project folder. When you generate scripts next time, Studio will ignore changes, corresponding to the excluded scripts. This allows you to have differences between the database and the model entities.
+
For example, you may want to add a database field to a table, corresponding to a project entity, but do not map it to an entity attribute. When Studio generates a script to delete the field from the database, just exclude it, and Studio will never generate it again.
--

Init Tables::
+
--
The *Init Tables* script creates all tables when you call *Create database*. It is executed before the *Init constraints* and *Init data* scripts. You can edit the script, but keep the comments dividing tables. The script is saved into the `10.create-db.sql` file.
--

Init Constraints::
+
--
The *Init Constraints* script creates referential integrity constraints. It is executed immediately after the *Init tables* script. You can edit the script, but keep the comments dividing tables. The script is saved into the `20.create-db.sql` file.
--

Init Data::
+
--
The *Init Data* script allows you to insert additional data or schema information not present in the data model. It is executed at the end of initialization. The script is saved into the `30.create-db.sql` file.
--

The optional *Init {component} tables* script creates tables for an application component if a table script is not provided by the component itself. The script is saved into the `01.{component}-create-db.sql` file.

The optional *Init {component} constraints* script creates referential integrity constraints for an application component if a constraints script is not provided by the component itself. The script is saved into the `02.{component}-create-db.sql` file.

Click *Save and close* to save all generated scripts. After that, stop the application server if it is running and execute *Create database* or *Update database* from from the main menu to apply the scripts:

image::functions/data_model/create_db.png[align="center"]

You can get more information on how to work with database during application development in the {main_man_url}/db_update_in_dev.html[documentation].