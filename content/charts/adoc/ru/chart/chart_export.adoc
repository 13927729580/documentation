:sourcesdir: ../../../source

[[chart_export]]
=== Экспорт диаграмм

Диаграммы могут быть экспортированы из работающего приложения в формате изображения или исходных данных. Для создания меню экспорта используется элемент `chart:export`, включающий по умолчанию следующие атрибуты:

* *Download as...* с доступными форматами: PNG, JPG, SVG, PDF
* *Save as...* с доступными форматами: CSV, XLSX, JSON
* *Annotate...*, используемый для добавления заметок и векторных аннотаций. Информацию о плагине для создания аннотаций вы можете найти https://www.amcharts.com/export-now-supports-annotating-charts-with-text-icons-arrows/[здесь].
* *Print*, открывающий стандартное окно отправки страницы на печать.

image::chart/charts_export_menu_1.png[align="center"]

Меню экспорта может быть настроено для ограничения доступа пользователей к данным диаграммы, например:

[source,xml]
----
include::{sourcesdir}/chart/chart_export_menu.xml[]
----

В этом случае пользователю будут доступны только кнопки для прямого скачивания диаграммы в заданных форматах:

image::chart/charts_export_menu_2.png[align="center"]

Вы можете задать следующие свойства экспорта:

* `backgroundColor` - цвет фона экспортируемого изображения. По умолчанию `#FFFFFF`.
* `dataDateFormat` - формат конвертации строк, содержащих даты, в объект даты. Применимо только к экспорту данных.
* `dateFormat` - форматирование даты в подписи категории в указанном формате (только экспорт данных).
* `enabled` - разрешает или запрещает возможность экспорта.
* `exportSelection` - экспорт только выбранного диапазона данных. По умолчанию `false`.
* `exportTitles` - заменяет имена полей их заголовками. По умолчанию `false`.
* `fileListener` - если выбрано значение `true`, позволяет перетащить файл с изображением и добавить его к аннотации. По умолчанию `false`.
* `fileName` - имя генерируемого файла (расширение будет добавлено в зависимости от выбранного типа экспорта).
* `keyListener` - если выбрано значение `true`, слушатель нажатия клавиш позволит отменять/повторять введённые аннотации.
* `position` - расположение кнопки экспорта. Доступные значения: `TOP_LEFT`, `TOP_RIGHT` (DEFAULT), `BOTTOM_LEFT`, `BOTTOM_RIGHT`.
* `removeImages` - если выбрано значение `true`, при экспорте будут удалены лишние изображения, загруженные из различных источников.

Следующие свойства можно настроить для каждого конкретного формата экспорта:

JPG::
+
* `quality` - качество конечного изображения. Возможные значения 0 - 1. Значение по умолчанию 1.

PNG, JPG, SVG, PDF::
+
* `multiplier` - коэффициент масштабирования конечного изображения относительно исходного размера.

CSV::
+
--
* `quotes` - определяет, нужно ли заключать значения в кавычки. Значение по умолчанию `true`.
* `delimiter` - символ, используемый в качестве разделителя. По умолчанию "," (запятая).
* `escape` - определяет, нужно ли экранировать строки. Значение по умолчанию `true`.
* `withHeader` - добавляет строку заголовков с именами колонок. Значение по умолчанию `true`.
--


XLSX::
+
--
* `dateFormat` - маска формата даты XLSX. Требует значения `true` для свойства `parseDates` в CategoryAxis.
* `stringify` - приведение всего содержимого ячеек к строке. Значение по умолчанию `false`.
* `withHeader` - добавляет строку заголовков с именами колонок. Значение по умолчанию `true`.
--

PDF::
+
--
* `pageOrientation` - ориентация страницы. По умолчанию `PORTRAIT`.
* `pageOrigin` - показывает или скрывает источник генерируемого файла PDF. По умолчанию `true`.
* `pageSize` - размер страницы PDF. По умолчанию `A4`.

Кроме того, вы можете переопределить строку сообщения `label.saved.from` в главном пакете сообщений.
--

PRINT::
* `delay` - задержка перед началом печати в секундах.
* `lossless` - разрешает или запрещает оптимизацию изображения при печати. По умолчанию `false`.

