:sourcesdir: ../../../../../../source

[[gui_data_comp_prog]]
====== Программное создание компонентов данных

Компоненты данных можно создавать и использовать программно.

В следующем примере мы создадим экран редактирования с тем же данными и визуальными компонентами, которые мы определяли декларативно в <<gui_data_comp_decl,предыдущем примере>>, на чистой Java без XML-дескриптора.

[source, java]
----
include::{sourcesdir}/gui/data_comp/data_comp_3.java[]
----

<1> `DataComponents` - это фабрика для создания компонентов данных.
<2> Регистрируем в экране экземпляр `DataContext`, чтобы обеспечить работу стандартного действия commit.
<3> Загрузчик `orderDl` загружает данные в контейнер `orderDc`.
<4> Загрузчик `orderDl` помещает загруженные сущности в data context для отслеживания изменений.
<5> `linesDc` создаётся как контейнер свойства.
<6> Определяем запрос для загрузчика `customersDl`.
<7> `ContainerValueSource` используется для связи одиночных полей с контейнерами данных.
<8> `ContainerOptions` предоставляет список опций для полей выбора.
<9> `ContainerTableItems` используется для связи таблиц с контейнерами.
<10> Переопределяем `getEditedEntityContainer()`, чтобы указать контейнер, вместо аннотации `@EditedEntityContainer`.
<11> Загружаем данные перед отображением экрана. Идентификатор редактируемой сущности будет автоматически передан в загрузчик `orderDl`.