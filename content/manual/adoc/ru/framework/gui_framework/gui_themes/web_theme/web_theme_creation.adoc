:sourcesdir: ../../../../../../source

[[web_theme_creation]]
====== Создание новой темы

В проекте можно создать одну или несколько новых тем и дать возможность пользователям выбирать среди них подходящую. Создание новой темы позволяет также переопределять переменные файла `*-theme.properties`, задающие некоторые параметры, требуемые на стороне сервера:

--
* Размеры диалоговых окон по умолчанию.

* Ширина полей ввода по умолчанию.

* Размеры некоторых компонентов (<<gui_Filter,Filter>>, <<gui_FileMultiUploadField,FileMultiUploadField>>).

* Соответствие между именами значков и именами констант перечисления `com.vaadin.server.FontAwesome` для использования элементов шрифта *Font Awesome* в стандартных действиях и экранах платформы при включенном свойстве <<cuba.web.useFontIcons,cuba.web.useFontIcons>>.
--

Создание новой темы::
+
--
Рассмотрим пример создания на основе Halo новой темы Facebook, напоминающей интерфейс сайта известной социальной сети.

. В *CUBA Studio* откройте секцию *Project Properties* и нажмите ссылку *Create custom theme*. В диалоговом окне введите имя новой темы - `facebook`, выберите `halo` базовой темой и нажмите *Create*. В проекте будет создана структура новой темы:
+
[source, plain]
----
include::{sourcesdir}/gui/themes/themes_25.scss[]
----
+
Файл `styles.scss` содержит список ваших тем:
+
[source, css]
----
include::{sourcesdir}/gui/themes/themes_7.scss[]
----
+
Содержимое файла `facebook.scss`:
+
[source, css]
----
include::{sourcesdir}/gui/themes/themes_8.scss[]
----
+
Содержимое файла `app-component.scss` из каталога `com.haulmont.cuba`:
+
[source, css]
----
include::{sourcesdir}/gui/themes/themes_24.scss[]
----

. Теперь отредактируйте переменные темы в файле `facebook-defaults.scss`. Это можно сделать в Studio, нажав *Manage theme > Edit Facebook theme variables*, или в IDE:
+
[source, css]
----
include::{sourcesdir}/gui/themes/themes_9.scss[]
----

. При необходимости, в файле `facebook-theme.properties` в подкаталоге `src` модуля *web* можно переопределять server-side переменные темы, заданные в файле `halo-theme.properties` платформы.


. Новая тема была автоматически добавлена в файл `web-app.properties`:
+
[source, properties]
----
cuba.web.theme = facebook
cuba.themeConfig = havana-theme.properties halo-theme.properties /com/company/application/web/facebook-theme.properties
----
+
Свойство приложения <<cuba.themeConfig,cuba.themeConfig>> определяет, какие темы будут доступны в меню приложения *Settings*.

. Пересоберите приложение и запустите сервер. Теперь при первом входе пользователь увидит приложение в теме Facebook, и в окне *Help* → *Settings* сможет выбирать между темами *Facebook*, *Halo* и *Havana*.
--

Изменение server-side параметров темы::
+
--
В теме Halo по умолчанию (при включенном свойстве приложения <<cuba.web.useFontIcons,cuba.web.useFontIcons>>) значки стандартных действий и экранов платформы загружаются из шрифта *Font Awesome*. В этом случае можно заменить стандартный значок, задав в файле `<your_theme>-theme.properties` нужное соответствие между именем значка и именем элемента шрифта. Например, чтобы использовать значок "плюс" для действия `create` в новой теме Facebook, содержимое файла `web/src/facebook-theme.properties` должно быть следующим:

[source, properties]
----
@include=halo-theme.properties

cuba.web.icons.create.png = font-icon:PLUS
----

Фрагмент стандартного экрана списка пользователей в теме Facebook и с измененным значком действия `create`:

image::gui_theme_facebook_1.png[align="center"]
--

