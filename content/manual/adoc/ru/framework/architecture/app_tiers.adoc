:sourcesdir: ../../../../source

[[app_tiers]]
==== Уровни и блоки приложения

Платформа позволяет строить приложения по классической трехуровневой схеме: клиентский уровень, средний слой, база данных. _Уровень_ отражает степень "удаленности" от хранимых данных. 

В дальнейшем речь пойдет в основном о среднем слое и клиентах, поэтому для краткости выражение "все уровни" означает два этих уровня.

На каждом уровне возможно создание одного или нескольких _блоков_ (units) приложения. Блок представляет собой обособленную исполняемую программу, взаимодействующую с другими блоками приложения. Средства платформы CUBA позволяют создавать блоки в виде веб-приложений и десктопных приложений.

.Уровни и блоки приложения
image::AppTiers.png[align="center"]

Middleware:: 
Средний слой, содержащий основную бизнес-логику приложения и выполняющий обращения к базе данных. Представляет собой отдельное веб-приложение под управлением стандартного контейнера <<javaee_web_profile,Java EE Web Profile>>. См. <<middleware>>.

Web Client:: 
Основной блок клиентского уровня. Содержит интерфейс, предназначенный, как правило, для внутренних пользователей организации. Представляет собой отдельное веб-приложение под управлением стандартного контейнера Java EE Web Profile. Реализация пользовательского интерфейса основана на фреймворке *Vaadin*. См. <<gui_framework>>.

Desktop Client:: 
Дополнительный блок клиентского уровня. Содержит интерфейс, предназначенный, как правило, для внутренних пользователей организации. Представляет собой десктопное Java-приложение, реализация пользовательского интерфейса основана на фреймворке *Java Swing*. См. <<gui_framework>>.

Web Portal:: 
Дополнительный блок клиентского уровня. Может содержать интерфейс для внешних пользователей и средства интеграции с мобильными устройствами и сторонними приложениями. Представляет собой отдельное веб-приложение под управлением стандартного контейнера Java EE Web Profile. Реализация пользовательского интерфейса основана на фреймворке *Spring MVC*. См. <<portal>>.

Polymer Client:: Дополнительный клиентский блок на чистом JavaScript, предоставляющий интерфейс для внешних пользователей. Основан на фреймворке https://www.polymer-project.org[Google Polymer], работает со средним слоем через <<rest_api_v2,REST API>>, запущенный в блоке Web Client или Web Portal. См. <<polymer_ui>>.

Обязательным блоком любого приложения является средний слой - *Middleware*. Для реализации пользовательского интерфейса, как правило, используется один или несколько клиентских блоков, например, *Web Client* и *Web Portal*.

Все основанные на Java клиентские блоки взаимодействуют со средним слоем одинаковым образом посредством протокола HTTP, что позволяет размещать средний слой произвольным образом, в том числе за сетевым экраном. Следует отметить, что при развертывании в простейшем случае среднего слоя и веб-клиента на одном сервере между ними организуется локальное взаимодействие в обход сетевого стека для снижения накладных расходов.

