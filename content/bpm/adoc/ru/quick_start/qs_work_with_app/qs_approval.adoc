:sourcesdir: ../../../../source

[[qs_approval]]
==== Этап утверждения менеджерами

Войдите в систему под пользователем `pierce`.

Откройте список текущих задач *BPM -> Process tasks*. Имеется одна задача `Approval`.

image::TaskListApproval.png[align="center"]

Выделите ее и на этот раз нажмите кнопку *Open process instance* - откроется системный экран для работы с экземпляром `ProcInstance`.

image::ProcInstanceEditApproval.png[align="center"]

В нем отображается информация о времени запуска процесса, инициаторе процесса, список вложений, участников, текущих и выполненных задач в рамках данного процесса. Также экран позволяет перейти к связанной сущности и выполнить процессное действие.

Обратите внимание на таблицу *Tasks*. Предыдущая задача `Validation` завершена с результатом `Valid`, и после успешной валидации контролером создались две новые задачи `Approval` на менеджеров `pierce` и `roberts`.

Утвердите договор, воспользовавшись кнопкой *Approve*.

Далее войдите в систему под пользователем `roberts`. Откройте договор из списка *Application -> Contracts*.

Пользователь `roberts` имеет незавершенную задачу по договору, следовательно, фрейм `procActionsFrame` отображает для него действия *Approve* и *Reject*. Нажмите кнопку *Reject*.

image::CompleteApprovalForm.png[align="center"]

Так как при описании выхода `Reject` в дизайнере мы указали параметр формы `commentRequired=true`, то комментарий в форме завершения данного действия обязателен. Введите комментарий и нажмите *ОК*.

Один из менеджеров отклонил договор, поэтому ему должно установиться состояние `Not approved`. Проверим это, открыв договор.

image::ContractEditNotApproved.png[align="center"]

Процесс согласования завершен.

